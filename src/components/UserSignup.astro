<form class="section-container" action="" method="POST">
    <section class="section-header">
        <h2>Registrar</h2>
    </section>
    <section class="section-body">
        <label for="name">Nombre</label>
        <input type="text" name="name" id="name" />
        <label for="email">Correo</label>
        <input type="email" name="email" id="email" />
        <label for="phone">Teléfono</label>
        <input type="tel" name="phone" id="phone" />
        <label for="password">Contraseña</label>
        <input type="password" name="password" id="password" />
        <label for="confirmPassword">Confirma tu contraseña</label>
        <input type="password" name="confirmPassword" id="confirmPassword" />
        <button>Enviar</button>
    </section>
</form>

<script is:inline>
    const button = document.querySelector("button");
    let data = {};

    button.addEventListener("click", (e) => {
        e.preventDefault();

        const name = document.getElementById("name");
        const email = document.getElementById("email");
        const phone = document.getElementById("phone");
        const password = document.getElementById("password");
        const confirmPassword = document.getElementById("confirmPassword");

        if (
            name.value === "" ||
            email.value === "" ||
            phone.value === "" ||
            password.value === "" ||
            confirmPassword.value === ""
        ) {
            alert("Todos los campos son obligatorios");
            return;
        }

        if (password.value !== confirmPassword.value) {
            alert("Las contraseñas no coinciden");
            return;
        }

        data = {
            name: name.value,
            role: "Employe",
            email: email.value,
            phone: phone.value,
            password: password.value,
        };

        fetch("/api/usersSignUp", {
            method: "post",
            body: JSON.stringify(data),
        }).then((response) => {
            if (response.ok) {
                alert("Usuario creado");
                window.location.href = "/";
            } else {
                alert("Error al crear el usuario");
            }
        });
    });
</script>

<style>
    .section-body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        padding: 20px;
        border-radius: 10px;
    }
</style>